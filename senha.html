<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PlushMaster/entrar</title>

<!-- Favicon -->
    <link rel="icon" type="image/png" href="https://i.postimg.cc/pXQ9MCLx/plush-master-logo-removebg-preview.png">

<style>
    body {
        margin: 0;
        padding: 0;
        background: #3dc8ff;
        font-family: Arial, sans-serif;
        text-align: center;

        /* ANIMAÇÃO DO FUNDO */
        animation: fadeIn 0.6s ease-out;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    .logo {
        width: 250px;
        margin-top: 30px;

        /* LOGO ENTRANDO */
        animation: slideDown 0.7s ease-out;
    }

    @keyframes slideDown {
        from { opacity: 0; transform: translateY(-20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .card {
        background: #f7e9dd;
        width: 90%;
        max-width: 400px;
        margin: 40px auto;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);


        /* CARD ENTRANDO SUAVE */
        animation: cardAnim 0.8s ease-out;
    }

    @keyframes cardAnim {
        from { opacity: 0; transform: translateY(30px) scale(0.95); }
        to { opacity: 1; transform: translateY(0) scale(1); }
    }

    h2 {
        margin-bottom: 10px;
        font-size: 24px;
        color: #000;
    }

    p {
        margin-top: 0;
        margin-bottom: 20px;
        color: #555;
        font-size: 15px;
    }

    label {
        display: block;
        text-align: left;
        width: 85%;
        margin: 0 auto 5px auto;
        color: #000;
        font-weight: bold;

        /* ANIMAÇÃO DE APARECER */
        animation: fadeUp 0.7s ease;
    }

    input {
        width: 75%;
        padding: 12px;
        border-radius: 10px;
        border: 2px solid #000;
        font-size: 16px;
        outline: none;
        margin-bottom: 25px;

        /* ANIMAÇÃO */
        animation: fadeUp 0.8s ease;
    }

    .btn {
        width: 85%;
        padding: 14px;
        border: none;
        border-radius: 10px;
        background: linear-gradient(180deg, #4db8ff, #0077e6);
        color: white;
        font-size: 18px;
        cursor: pointer;
        transition: 0.2s;

        /* ANIMAÇÃO */
        animation: fadeUp 0.9s ease;
    }

    .btn:hover {
        opacity: 0.9;
        transform: scale(1.03);
    }

    @keyframes fadeUp {
        from { opacity: 0; transform: translateY(15px); }
        to { opacity: 1; transform: translateY(0); }
    }

    footer {
        margin-top: 25px;
        font-size: 14px;
        color: #004c73;
    }

    #notificacoes {
        position: fixed;
        top: 15px;
        right: 15px;
        width: 260px;
        z-index: 999999;
    }

    .notif {
        background: rgba(0,0,0,0.7);
        border-left: 4px solid #00eaff;
        padding: 12px;
        color: #fff;
        font-size: 15px;
        margin-top: 10px;
        border-radius: 8px;
        animation: aparecer .4s ease;
    }

    @keyframes aparecer {
        from { opacity: 0; transform: translateX(20px); }
        to { opacity: 1; transform: translateX(0); }
    }
    
</style>
</head>

<body>

<div id="notificacoes"></div>

<img class="logo" src="https://i.postimg.cc/pXQ9MCLx/plush-master-logo-removebg-preview.png">

<div class="card">
    <h2>Digite sua senha</h2>
    <p>Para entrar com seu e-mail: <span id="emailExibido"></span></p>

    <label>Senha</label>
    <input type="password" id="senha" placeholder="Digite sua senha">

    <button class="btn" onclick="entrar()">Entrar</button>
</div>

<footer>© 2025 PlushMaster</footer>

<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyApQ9KvXtv4_negpU9wHlajGeOuZ1FSKBA",
  authDomain: "plush-master.firebaseapp.com",
  projectId: "plush-master",
  storageBucket: "plush-master.appspot.com",
  messagingSenderId: "822751531077",
  appId: "1:822751531077:web:ffba31a45d08c22a7e132c",
  measurementId: "G-JYRNTNQKEB"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();

    function notificar(msg) {
        const div = document.createElement("div");
        div.className = "notif";
        div.innerText = msg;
        document.getElementById("notificacoes").appendChild(div);

        setTimeout(() => {
            div.style.opacity = "0";
            div.style.transform = "translateX(20px)";
            setTimeout(() => div.remove(), 300);
        }, 3500);
    }

    // Pega o email da URL
const params = new URLSearchParams(window.location.search);
// Primeiro tenta pegar o email da URL
let email = params.get("email");

// Se não tiver na URL, tenta pegar do localStorage
if (!email) {
    email = localStorage.getItem("emailLogin");
}

// Se ainda não tiver email, volta para a tela de login
if (!email) {
    notificar("Email não encontrado. Volte para a tela de login.");
    setTimeout(() => window.location.href = "inicio.html", 1500);
} else {
    // Exibe o email na tela
    document.getElementById("emailExibido").innerText = email;
}

if (!email) {
    notificar("Email não encontrado. Volte para a tela de login.");
    setTimeout(() => window.location.href = "index.html", 1500);
}

    function entrar() {
        const senha = document.getElementById("senha").value.trim();

        if (!senha) {
            notificar("Digite sua senha!");
            return;
        }

        auth.signInWithEmailAndPassword(email, senha)
            .then(() => {
                notificar("Login realizado com sucesso!");
                 window.location.href = "inicio.html"; 

            })
            .catch((error) => {
                if (error.code === "auth/wrong-password") {
                    notificar("Senha incorreta!");
                } else {
                    notificar(error.message);
                }
            });
    }
    
</script>


</body>
</html>